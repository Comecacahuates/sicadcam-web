---
import ResponsiveContainer from "../layout/ResponsiveContainer.astro";
import Breadcrumbs from "../ui/Breadcrumbs.astro";
import Text from "../ui/Text.astro";
import Heading from "../ui/Heading.astro";
import CtaButtons from "../ui/CtaButtons.astro";

interface Props {
  title: string;
  subtitle?: string;
  description?: string;
  breadcrumbs?: Array<{ text: string; href?: string }>;
  primaryCta?: {
    text: string;
    href: string;
  };
  secondaryCta?: {
    text: string;
    href: string;
  };
  background?: "white" | "gray" | "gradient" | "blue" | "green";
  compact?: boolean;
  class?: string;
}

const {
  title,
  subtitle,
  description,
  breadcrumbs,
  primaryCta,
  secondaryCta,
  background = "white",
  compact = false,
  class: className = "",
} = Astro.props;

const backgroundClasses = {
  white: "bg-white border-b border-slate-200",
  gray: "bg-slate-100 border-b border-slate-300",
  gradient:
    "bg-gradient-to-br from-blue-50 to-slate-100 border-b border-slate-300",
  blue: "bg-blue-600 text-white border-b border-blue-700",
  green: "bg-green-600 text-white border-b border-green-700",
};

const paddingClass = compact ? "lg" : "xl";
const isDarkBackground = background === "blue" || background === "green";
---

<section class={`${backgroundClasses[background]} ${className}`}>
  <ResponsiveContainer size="lg" padding={paddingClass}>
    <div class="max-w-4xl">
      <!-- Breadcrumbs -->
      {
        breadcrumbs && (
          <Breadcrumbs
            items={breadcrumbs}
            theme={isDarkBackground ? "dark" : "light"}
          />
        )
      }

      <!-- Subtitle -->
      {
        subtitle && (
          <Text
            variant="body"
            color={isDarkBackground ? "white" : "blue"}
            class="font-medium mb-3"
          >
            {subtitle}
          </Text>
        )
      }

      <!-- Title -->
      <Heading
        as="h1"
        variant="hero"
        color={isDarkBackground ? "white" : "default"}
        class="mb-6"
      >
        {title}
      </Heading>

      <!-- Description -->
      {
        description && (
          <Text
            variant="lead"
            color={isDarkBackground ? "white" : "muted"}
            class={`max-w-3xl ${isDarkBackground ? "text-blue-100" : ""} ${primaryCta || secondaryCta ? "mb-8" : ""}`}
          >
            {description}
          </Text>
        )
      }

      <!-- CTAs -->
      <CtaButtons
        primaryCta={primaryCta}
        secondaryCta={secondaryCta}
        alignment="start"
        theme={isDarkBackground ? "dark" : "light"}
      />
    </div>
  </ResponsiveContainer>
</section>
