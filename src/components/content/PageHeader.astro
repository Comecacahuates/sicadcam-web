---
import Container from '../layout/Container.astro';
import Button from '../ui/Button.astro';
import ButtonGroup from '../ui/ButtonGroup.astro';
import Text from '../ui/Text.astro';
import Heading from '../ui/Heading.astro';

interface Props {
  title: string;
  subtitle?: string;
  description?: string;
  breadcrumbs?: Array<{ text: string; href?: string }>;
  primaryCta?: {
    text: string;
    href: string;
  };
  secondaryCta?: {
    text: string;
    href: string;
  };
  background?: 'white' | 'gray' | 'gradient' | 'blue';
  compact?: boolean;
  class?: string;
}

const { 
  title,
  subtitle,
  description,
  breadcrumbs,
  primaryCta,
  secondaryCta,
  background = 'white',
  compact = false,
  class: className = ''
} = Astro.props;

const backgroundClasses = {
  white: 'bg-white border-b border-slate-200',
  gray: 'bg-slate-100 border-b border-slate-300',
  gradient: 'bg-gradient-to-br from-blue-50 to-slate-100 border-b border-slate-300',
  blue: 'bg-blue-600 text-white border-b border-blue-700'
};

const paddingClass = compact ? 'lg' : 'xl';
---

<section class={`${backgroundClasses[background]} ${className}`}>
  <Container size="lg" padding={paddingClass}>
    <div class="max-w-4xl">
      <!-- Breadcrumbs -->
      {breadcrumbs && (
        <nav class="mb-6" aria-label="Breadcrumb">
          <ol class={`flex items-center space-x-2 text-sm ${background === 'blue' ? 'text-blue-200' : 'text-slate-500'}`}>
            {breadcrumbs.map((crumb, index) => (
              <li class="flex items-center">
                {index > 0 && (
                  <svg class={`w-4 h-4 mx-2 ${background === 'blue' ? 'text-blue-300' : 'text-slate-400'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                )}
                {crumb.href ? (
                  <a href={crumb.href} class={`transition-colors ${background === 'blue' ? 'hover:text-white' : 'hover:text-blue-600'}`}>
                    {crumb.text}
                  </a>
                ) : (
                  <span class={`font-medium ${background === 'blue' ? 'text-white' : 'text-slate-700'}`}>{crumb.text}</span>
                )}
              </li>
            ))}
          </ol>
        </nav>
      )}

      <!-- Subtitle -->
      {subtitle && (
        <Text variant="body" color={background === 'blue' ? 'white' : 'blue'} class="font-medium mb-3">
          {subtitle}
        </Text>
      )}
      
      <!-- Title -->
      <Heading as="h1" variant="hero" color={background === 'blue' ? 'white' : 'default'} class="mb-6">
        {title}
      </Heading>
      
      <!-- Description -->
      {description && (
        <Text variant="lead" color={background === 'blue' ? 'white' : 'muted'} class={`max-w-3xl ${background === 'blue' ? 'text-blue-100' : ''} ${(primaryCta || secondaryCta) ? 'mb-8' : ''}`}>
          {description}
        </Text>
      )}
      
      <!-- CTAs -->
      {(primaryCta || secondaryCta) && (
        <ButtonGroup alignment="start">
          {primaryCta && (
            <Button 
              href={primaryCta.href} 
              variant={background === 'blue' ? 'white' : 'primary'}
              size="lg"
            >
              {primaryCta.text}
            </Button>
          )}
          {secondaryCta && (
            <Button 
              href={secondaryCta.href} 
              variant={background === 'blue' ? 'white-outline' : 'outline'}
              size="lg"
            >
              {secondaryCta.text}
            </Button>
          )}
        </ButtonGroup>
      )}
    </div>
  </Container>
</section>
